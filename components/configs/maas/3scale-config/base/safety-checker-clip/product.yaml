apiVersion: capabilities.3scale.net/v1beta1
kind: Product
metadata:
  name: safety-checker
spec:
  name: "Stable Diffusion Safety Checker"
  systemName: "safety-checker"
  deployment:
    apicastHosted:
      authentication:
        userkey:
          authUserKey: "Authorization"
          credentials: "authorization"
  description: >
    A safety screening model designed to identify NSFW content in images generated by Stable Diffusion models. Screens outputs against hardcoded not-safe-for-work content patterns, helping ensure appropriate content generation in AI applications.
  backendUsages:
    safety-checker:
      path: /
  metrics:
    hits:
      description: Number of API hits
      friendlyName: Hits
      unit: "hit"
  methods:
    v2:
      friendlyName: "API v2"
      description: "KServe inference service"
  mappingRules:
    - httpMethod: POST
      pattern: /v2
      metricMethodRef: v2
      increment: 1
  applicationPlans:
    standard:
      name: "Standard"
      default: true
      appsRequireApproval: false
      published: true
  policies:
    - name: cors
      version: builtin
      enabled: true
      configuration:
        {
          "allow_origin": "*",
          "allow_headers": ["Authorization", "Content-type", "Accept"],
          "allow_methods": [],
        }
    - name: apicast
      version: "builtin"
      configuration: {}
      enabled: true
